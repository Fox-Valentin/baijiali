
<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7">
    <![endif]-->
    <!--[if IE 7]>
    <html class="no-js lt-ie9 lt-ie8">
        <![endif]-->
        <!--[if IE 8]>
        <html class="no-js lt-ie9">
            <![endif]-->
            <!--[if gt IE 8]>
            <!-->
            <html class="no-js">
                <!--<![endif]-->
<head>
                <meta charset="utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
                <title>会员注册-百家利</title>
                <meta name="description" content="">
                <meta name="viewport" content="width=device-width">
                <link rel="stylesheet" href="static/css/bootstrap.min.css">
                <link rel="stylesheet" href="static/css/icomoon-social.css">
                <link rel="stylesheet" href="static/css/leaflet.css" />
                <!--[if lte IE 8]>
                <link rel="stylesheet" href="static/css/leaflet.ie.css" />
                <![endif]-->
                <link rel="stylesheet" href="static/css/main.css">
                <script src="static/js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>
<body>
                <!--[if lt IE 7]>
                <p class="chromeframe">
                    You are using an <strong>outdated</strong>
                    browser. Please
                    <a href="http://browsehappy.com/">upgrade your browser</a>
                    or
                    <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a>
                    to improve your experience.
                </p>
                <![endif]-->

                <!-- Navigation & Logo-->
                <div class="mainmenu-wrapper">
                    <div class="container">

                        <div class="mainmenu">
                            <ul>
                                <li class="logo-wrapper">
                                    <a href="index.html">
                                        <img src="static/images/mPurpose-logo.png" alt="Multipurpose Twitter Bootstrap Template"></a>
                                </li>
                                <li class="active">
                                    <a href="/index_page.php">网站首页</a>
                                </li>
                                <li>
                                    <a  href="/about.php">关于我们</a>
                                </li>
                                <li>
                                    <a href="/index_page.php">百家利</a>
                                </li>

                                <li>
                                    <a href="/userlogin.php">会员登录</a>
                                </li>
                                <li>
                                    <a href="/agentlogin.php">代理登录</a>
                                </li>
                                <li>
                                    <a href="/userregister.php">成为会员</a>
                                </li>
                                <li>
                                    <a href="/agentregister.php">成为代理</a>
                                </li>

                                <li >
                                    <a href="/contactus.php">联系我们</a>

                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Page Title -->
                <div class="section section-breadcrumbs">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <h1>会员注册</h1>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="basic-login">
                                    <form  id="registerForm">
                                        <input type="hidden" class="form-control" id="create_user_id" name="create_user_id" value="-1">
                                        <div class="form-group">
                                            <label for="register-username"> <i class="icon-user"></i> <b>类型</b>
                                            </label>
                                            <select class="form-control" id="type" name="type">
                                                <option value="Boss" checked>会员</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="register-password"> <i class="icon-lock"></i> <b>介绍人姓名或代码</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="agent_name" name="agent_name" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password2">
                                                <i class="icon-lock"></i>
                                                <b>真实姓名</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="name" name="name" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>身份证号码</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="id_no" name="id_no" placeholder="请输入您的身份证号码"></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>电子邮箱</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="email" name="email" placeholder="请输入您电子邮箱，如example@gmail.com"></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>密码</b>
                                            </label>
                                            *（必填）
                                            <input type="password" class="form-control" id="pwd" name="pwd"></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>地址</b>
                                            </label>
                                            <input type="text" class="form-control" id="address" name="address" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>电话</b>
                                            </label>
                                            <input type="text" class="form-control" id="tel" name="tel" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>银行开户姓名</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="bankusername" name="bankusername" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>银行名称</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="bankname" name="bankname" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>银行账号</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="bankaccount" name="bankaccount" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>手机号码</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="mobile1" name="mobile1" placeholder=""></div>

                                        <div class="form-group">
                                            <label for="register-password">
                                                <b>微信(wechat)</b>
                                            </label>
                                            *（必填）
                                            <input type="text" class="form-control" id="wechat" name="wechat" placeholder=""></div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>备注</b>
                                            </label>
                                            <textarea class="form-control" rows="3" id="intro" name="intro"></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label for="register-password">
                                                <i class="icon-lock"></i>
                                                <b>加入日期</b>
                                            </label>
                                            <input type="text" class="form-control" id="jointime" name="jointime" placeholder=""></div>
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-block">提交申请</button>
                                            <div class="clearfix"></div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Footer -->

                <div class="footer">
                    <div class="container">

                        <div class="row">
                            <div class="col-md-12">
                                <div class="footer-copyright">Copyright © 1999-2016 百家利投资有限公司</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Javascripts -->
                <!--<script src="static/js/jquery.js"></script>
            -->
            <script>window.jQuery || document.write('<script src="static/js/jquery-1.9.1.min.js"><\/script>')</script>
        <script src="static/js/bootstrap.min.js"></script>
        <script src="static/js/leaflet.js"></script>
        <script src="static/js/jquery.fitvids.js"></script>
        <script src="static/js/jquery.sequence-min.js"></script>
        <script src="static/js/jquery.bxslider.js"></script>
        <script src="static/js/main-menu.js"></script>
        <script src="static/js/template.js"></script>
        <script src="static/js/bootstrapValidator.min.js"></script>
        <!--script src="js/sessionstorage.min.js"> </script>
    <!--session -->
    <!--script src="js/session.js">
</script>
<!--session -->

<script src="static/js/bootstrap-datepicker.js"></script>
<script>
    
    function checkEmailIsDuplicate(email){
        
        var target_url =  "/admin/php/checkEmailIsDuplicate.php";
        $.ajax({
            type: 'GET',
            data: "email="+email,
            url: target_url,
            success: function(data){
                //alert(data);
                if(data=="true"){//已有人使用
                    alert(email+"已經有人使用，請再次填寫!");
                    $("#email").focus();
                }
            },
            error: function(){
                alert('檢測email失敗!');
            }
        });
    }
    
    $(document).ready(function(){
        //加入日期
        //get now date
        var currentTime = new Date();
        var month = currentTime.getMonth()+1;
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();       
        var fulldate = year+"-"+month+"-"+day;
        
        $("#jointime").val(fulldate);
        //日期選擇器
        $('#jointime').datepicker({
            format: 'yyyy-mm-dd'
        });
    
        $("#email").change(function(){
            //alert($(this).val());
            checkEmailIsDuplicate($(this).val());
            
        });
        
        $("#registerForm").bootstrapValidator({
                message: 'This value is not valid',
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                submitHandler: function(validator, form, submitButton) {
                    // Do nothing
                    var postData = form.serialize();
                    //alert(postData);
                    var email = $("#email").val();
                    var name = $("#name").val();
                    var pwd = $("#pwd").val();
                    var target_url = "admin/php/User/add.php";
                    $.ajax({
                        type: 'GET',
                        data: postData,
                        url:  target_url,
                        success: function(data){
                            //console.log("Ok"+data);
                            if(data == 3){
                                alert('申请失败，请重新输入!');
                            }else{                              
                                alert('申请成功，请等待审批!');
                                location.href = "ApplyOK.php?email="+email+"&pwd="+pwd;
                            }
                            //跳至另一頁面
                        },
                        error: function(){
                            //console.log("not ok"+data);
                            alert('失敗:資料尚未傳送!請再試一次');
                            //location.href = "admin.html?action=add";
                        }
                    });
                },
                fields: {
                    type: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    name: {
                        validators: {
                            stringLength: {
                                max: 30,
                                message: '不能超過30個字元'
                            },
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    id_no: {
                        validators: {
                            stringLength: {
                                max: 30,
                                message: '不能超過30個字元'
                            },
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    email: {
                        validators: {
                            emailAddress: {
                                message: 'E-mail格式不正確'
                            },
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    mobile1: {
                        validators: {
                            /*
                            digits: {
                                max: 12,
                                message: '電話號碼格式不正確'
                            },*/
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    wechat: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            }
                        }
                    },
                    pwd: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            },
                            stringLength: {
                                max: 15,
                                message: '不能超過12個數字'
                            }
                        }
                    },
                    bankname: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            },
                            stringLength: {
                                max: 30,
                                message: '不能超過20個字'
                            }
                        }
                    },
                    bankusername: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            },
                            stringLength: {
                                max: 30,
                                message: '不能超過20個字'
                            }
                        }
                    },
                    bankaccount: {
                        validators: {
                            notEmpty: {
                                message: '必填'
                            },
                            stringLength: {
                                max: 30,
                                message: '不能超過20個字'
                            }
                        }
                    }
                }
            });
    });
    </script>
<script>
     if($(window).width()<768){
        //$(".mainmenu").click(function(){
        if(document.referrer.indexOf('index_page')>0 || document.referrer.indexOf('about')>0 || document.referrer.indexOf('userlogin')>0 || document.referrer.indexOf('agentlogin')>0 || document.referrer.indexOf('userregister')>0 || document.referrer.indexOf('agentregister')>0 || document.referrer.indexOf('contactus')>0)
            $("html, body").animate({scrollTop: $(".mainmenu-wrapper").height()}, 1000);
        //})
     }
     </script>
</body>
</html>